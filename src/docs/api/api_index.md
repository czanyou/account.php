# 开放 API 接口

编写: 成真

## 目录

[TOC]

## 概述

本文定义了 Vision 系统开放 API 接口调用说明

## 公共信息

### 方法

如果没有注明, 则默认为 HTTP GET 方法.

### 需要登录

对于需要要登录才能访问的 API, 请参考登录相关文档.

### 请求参数

如果没有注明, 则默认为 string 类型
标注有 '*' 号的参数为必需的请求参数

### 返回格式

如果没有注明, 则默认为 JSON 格式

## 通用请求参数

| 名称          | 类型      | 说明
| ---           | ---       | ---
| start         | int       | 查询结果开始返回的索引(用于分页查询)
| count         | int       | 查询结果最多返回的数量(用于分页查询)

## 通用返回参数

| 名称          | 类型      | 说明
| ---           | ---       | ---
| start         | int       | 查询结果开始返回的索引(用于分页查询)
| count         | int       | 查询结果最多返回的数量(用于分页查询)
| total         | int       | 查询结果总共数量(用于分页查询)
| ret           | int       | 返回值, 0 表示调用成功, 负数表示调用错误
| data          | mix       | 返回结果, 详见各个方法
| error         | string    | 错误信息, 没有时不返回

## 通用返回错误码

| 代码  | 名称                      | 说明
| ---   | ---                       | ---
| -434  | E_ALREADY_EXISTS          | 指定的对象已经存在了
| -431  | E_MISS_REQUIRED_PARAM     | 缺少指定名称的参数
| -432  | E_NAME_DUPLICATE          | 指定的名称冲突了, 不能使用
| -433  | E_NOT_EXISTS              | 指定的对象不存在
| -435  | E_NOT_YOUR_OWN            | 指定的对象不属于当前用户
| -441  | E_USER_INVALID_OPEN_ID    | 没有指定用户 ID
| -401  | E_USER_NOT_LOGIN          | 当前用户没有登录

